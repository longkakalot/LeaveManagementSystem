2025-07-08T08:36:21.8110787+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T08:36:21.8227768+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T08:36:21.8232418+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T08:36:21.8232895+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T08:36:37.3697063+07:00 0HNDTNVC4F6LI:00000001 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T08:36:37.3721618+07:00 0HNDTNVC4F6LI:00000001 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T08:39:42.2827545+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T08:39:42.3115198+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T08:39:42.3122975+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T08:39:42.3124028+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T08:39:58.5501828+07:00 0HNDTO17SA330:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T08:39:58.5521413+07:00 0HNDTO17SA330:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T08:40:44.9203813+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T08:40:44.9395898+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T08:40:44.9404039+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T08:40:44.9404775+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T08:41:29.1088460+07:00 0HNDTO1QE3MAE:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T08:41:29.1105682+07:00 0HNDTO1QE3MAE:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T08:42:09.9805441+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T08:42:09.9979629+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T08:42:09.9984671+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T08:42:09.9985241+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T08:44:57.6988572+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T08:44:57.7230659+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T08:44:57.7241254+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T08:44:57.7243336+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T08:45:29.1364701+07:00 0HNDTO45P99VD:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T08:45:29.1391289+07:00 0HNDTO45P99VD:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T08:48:40.3494408+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T08:48:40.3689212+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T08:48:40.3712273+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T08:48:40.3713655+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T08:50:11.6778249+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T08:50:11.6972984+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T08:50:11.6979317+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T08:50:11.6980162+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T08:50:26.5613640+07:00 0HNDTO73E0NM6:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T08:50:26.5629988+07:00 0HNDTO73E0NM6:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T08:51:41.8264149+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T08:51:41.8434759+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T08:51:41.8441762+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T08:51:41.8442237+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T08:52:02.8948580+07:00 0HNDTO7UBIDF3:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T08:52:02.8971359+07:00 0HNDTO7UBIDF3:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T08:55:04.1561298+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T08:55:04.1753204+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T08:55:04.1760168+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T08:55:04.1760924+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T08:55:28.3939728+07:00 0HNDTO9QIG6NV:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T08:55:28.3956621+07:00 0HNDTO9QIG6NV:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T08:58:18.4083778+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T08:58:18.4247625+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T08:58:18.4254423+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T08:58:18.4255344+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T08:58:33.4657204+07:00 0HNDTOBKEREUG:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T08:58:33.4677899+07:00 0HNDTOBKEREUG:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T09:05:48.1782420+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T09:05:48.1995541+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T09:05:48.2004377+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T09:05:48.2005274+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T09:06:54.3086382+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T09:06:54.3277008+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T09:06:54.3285578+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T09:06:54.3286951+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T09:08:01.5617862+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T09:08:01.5872717+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T09:08:01.5882296+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T09:08:01.5883321+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T09:10:00.1100449+07:00 0HNDTOH279DB2:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T09:10:00.1127104+07:00 0HNDTOH279DB2:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T09:24:52.8991553+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T09:24:52.9171166+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T09:24:52.9175854+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T09:24:52.9176251+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T09:25:23.5377691+07:00 0HNDTOQFKA75R:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T09:25:23.5395480+07:00 0HNDTOQFKA75R:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T09:43:27.6169299+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T09:43:27.6294712+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T09:43:27.6300175+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T09:43:27.6300740+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T09:43:42.8732841+07:00 0HNDTP4RS4NF2:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T09:43:42.8749431+07:00 0HNDTP4RS4NF2:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T09:44:22.0272052+07:00 0HNDTP4RS4NF1:00000004 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
System.InvalidOperationException: The ConnectionString property has not been initialized.
   at Microsoft.Data.SqlClient.SqlConnection.PermissionDemand()
   at Microsoft.Data.SqlClient.SqlConnectionFactory.PermissionDemand(DbConnection outerConnection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(SqlConnectionOverrides overrides, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Dapper.SqlMapper.QueryAsync[T](IDbConnection cnn, Type effectiveType, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 433
   at LeaveManagement.Application.Features.LeaveRequests.Commands.SubmitLeaveRequest.SubmitLeaveRequestCommandHandler.Handle(SubmitLeaveRequestCommand request, CancellationToken cancellationToken) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Application\Features\LeaveRequests\Commands\SubmitLeaveRequest\SubmitLeaveRequestCommandHandler.cs:line 71
   at LeaveManagement.WebUI.Controllers.LeaveRequestController.Submit(Int32 id) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI\Controllers\LeaveRequestController.cs:line 157
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-08T09:50:08.8467670+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T09:50:08.8608503+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T09:50:08.8615697+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T09:50:08.8616521+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T09:50:23.5458312+07:00 0HNDTP8JDDNQ7:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T09:50:23.5475952+07:00 0HNDTP8JDDNQ7:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T09:50:33.1388189+07:00 0HNDTP8JDDNQ6:00000005 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'ApproverRules'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Dapper.SqlMapper.QueryAsync[T](IDbConnection cnn, Type effectiveType, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 434
   at LeaveManagement.Application.Features.LeaveRequests.Commands.SubmitLeaveRequest.SubmitLeaveRequestCommandHandler.Handle(SubmitLeaveRequestCommand request, CancellationToken cancellationToken) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Application\Features\LeaveRequests\Commands\SubmitLeaveRequest\SubmitLeaveRequestCommandHandler.cs:line 73
   at LeaveManagement.WebUI.Controllers.LeaveRequestController.Submit(Int32 id) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI\Controllers\LeaveRequestController.cs:line 157
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:cc899b07-30c9-43d2-83b0-db428c809028
Error Number:208,State:1,Class:16
2025-07-08T09:53:26.7524979+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T09:53:26.7670286+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T09:53:26.7675167+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T09:53:26.7675772+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T09:53:39.7605080+07:00 0HNDTPAEE7DSS:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T09:53:39.7620526+07:00 0HNDTPAEE7DSS:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T09:55:48.1265109+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T09:55:48.1480442+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T09:55:48.1488788+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T09:55:48.1489557+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T09:56:01.3142538+07:00 0HNDTPBOJO55P:00000001 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T09:56:01.3176730+07:00 0HNDTPBOJO55P:00000001 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T09:56:22.4027760+07:00 0HNDTPBOJO55Q:00000002 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'MaChucVu'.
Invalid column name 'MaPhongBan'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Dapper.SqlMapper.QueryRowAsync[T](IDbConnection cnn, Row row, Type effectiveType, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 489
   at LeaveManagement.Application.Features.LeaveRequests.Commands.SubmitLeaveRequest.SubmitLeaveRequestCommandHandler.GetApproverUserId(String approverRole, String maPhongBan, Int32 leaveRequestId, Int32 userId) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Application\Features\LeaveRequests\Commands\SubmitLeaveRequest\SubmitLeaveRequestCommandHandler.cs:line 143
   at LeaveManagement.Application.Features.LeaveRequests.Commands.SubmitLeaveRequest.SubmitLeaveRequestCommandHandler.Handle(SubmitLeaveRequestCommand request, CancellationToken cancellationToken) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Application\Features\LeaveRequests\Commands\SubmitLeaveRequest\SubmitLeaveRequestCommandHandler.cs:line 91
   at LeaveManagement.WebUI.Controllers.LeaveRequestController.Submit(Int32 id) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI\Controllers\LeaveRequestController.cs:line 157
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:d811ad39-6a28-41ed-8ceb-a016deca0c9a
Error Number:207,State:1,Class:16
2025-07-08T16:40:31.3125722+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T16:40:31.3276178+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T16:40:31.3280679+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T16:40:31.3281091+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T16:40:46.5686255+07:00 0HNDU0DTFLMO8:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T16:40:46.5733948+07:00 0HNDU0DTFLMO8:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T16:40:52.2194464+07:00 0HNDU0DTFLMO8:00000003 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
List`1 -> List`1
System.Collections.Generic.List`1[[LeaveManagement.Domain.Entities.LeaveRequest, LeaveManagement.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> System.Collections.Generic.List`1[[LeaveManagement.Application.DTOs.LeaveRequestDto, LeaveManagement.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
LeaveRequest -> LeaveRequestDto
LeaveManagement.Domain.Entities.LeaveRequest -> LeaveManagement.Application.DTOs.LeaveRequestDto
   at lambda_method48(Closure, LeaveRequest, LeaveRequestDto, ResolutionContext)
   at lambda_method47(Closure, Object, List`1, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method47(Closure, Object, List`1, ResolutionContext)
   at LeaveManagement.Application.Features.LeaveRequests.Queries.GetLeaveRequestList.GetLeaveRequestListQueryHandler.Handle(GetLeaveRequestListQuery request, CancellationToken cancellationToken) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Application\Features\LeaveRequests\Queries\GetLeaveRequestList\GetLeaveRequestListQueryHandler.cs:line 37
   at LeaveManagement.WebUI.Controllers.LeaveRequestController.Index() in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI\Controllers\LeaveRequestController.cs:line 87
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-08T16:44:05.7275567+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T16:44:05.7471450+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T16:44:05.7478492+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T16:44:05.7479374+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T16:44:21.5163169+07:00 0HNDU0FTCLSI4:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T16:44:21.5187845+07:00 0HNDU0FTCLSI4:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T16:44:48.1188795+07:00 0HNDU0FTCLSI3:00000005 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'TP'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Dapper.SqlMapper.QueryAsync[T](IDbConnection cnn, Type effectiveType, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 434
   at LeaveManagement.Infrastructure.Repositories.ApprovalStepRepository.GetStepsByGroupAsync(String maChucVu, Int32 days) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Infrastructure\Repositories\ApprovalStepRepository.cs:line 38
   at LeaveManagement.Application.Features.LeaveRequests.Commands.SubmitLeaveRequest.SubmitLeaveRequestCommandHandler.Handle(SubmitLeaveRequestCommand request, CancellationToken cancellationToken) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Application\Features\LeaveRequests\Commands\SubmitLeaveRequest\SubmitLeaveRequestCommandHandler.cs:line 65
   at LeaveManagement.WebUI.Controllers.LeaveRequestController.Submit(Int32 id) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI\Controllers\LeaveRequestController.cs:line 157
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:64bbe36d-cc2f-47c3-8d10-8d5eb615d053
Error Number:207,State:1,Class:16
2025-07-08T16:45:15.5342313+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T16:45:15.5608682+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T16:45:15.5618226+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T16:45:15.5620246+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T16:45:30.3997859+07:00 0HNDU0GI8HVR1:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T16:45:30.4012699+07:00 0HNDU0GI8HVR1:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T16:47:21.5456786+07:00 0HNDU0GI8HVR0:00000005 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'TP'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Dapper.SqlMapper.QueryAsync[T](IDbConnection cnn, Type effectiveType, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 434
   at LeaveManagement.Infrastructure.Repositories.ApprovalStepRepository.GetStepsByGroupAsync(String maChucVu, Int32 days) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Infrastructure\Repositories\ApprovalStepRepository.cs:line 38
   at LeaveManagement.Application.Features.LeaveRequests.Commands.SubmitLeaveRequest.SubmitLeaveRequestCommandHandler.Handle(SubmitLeaveRequestCommand request, CancellationToken cancellationToken) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Application\Features\LeaveRequests\Commands\SubmitLeaveRequest\SubmitLeaveRequestCommandHandler.cs:line 65
   at LeaveManagement.WebUI.Controllers.LeaveRequestController.Submit(Int32 id) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI\Controllers\LeaveRequestController.cs:line 157
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:0abcb93f-e112-407c-8218-873813c76c8b
Error Number:207,State:1,Class:16
2025-07-08T16:49:58.9023517+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T16:49:58.9199492+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T16:49:58.9207880+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T16:49:58.9208733+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T16:50:15.4648579+07:00 0HNDU0J6JVBS2:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T16:50:15.4667185+07:00 0HNDU0J6JVBS2:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T16:51:50.1730962+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T16:51:50.1937991+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T16:51:50.1944078+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T16:51:50.1944631+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T16:52:14.6857749+07:00 0HNDU0K7QET1G:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T16:52:14.6878296+07:00 0HNDU0K7QET1G:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T16:52:36.8013038+07:00 0HNDU0K7QET1F:00000005 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK__LeaveAppr__Leave__4D94879B". The conflict occurred in database "LeaveManagement", table "dbo.LeaveRequests", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.CompleteAsyncExecuteReader(Boolean isInternal, Boolean forDescribeParameterEncryption)
   at Microsoft.Data.SqlClient.SqlCommand.InternalEndExecuteNonQuery(IAsyncResult asyncResult, Boolean isInternal, String endMethod)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryInternal(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.EndExecuteNonQueryAsync(IAsyncResult asyncResult)
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<InternalExecuteNonQueryAsync>b__193_1(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location ---
   at Dapper.SqlMapper.ExecuteImplAsync(IDbConnection cnn, CommandDefinition command, Object param) in /_/Dapper/SqlMapper.Async.cs:line 662
   at LeaveManagement.Infrastructure.Repositories.LeaveApprovalRequestRepository.SubmitLeaveApprovalRequestAsync(LeaveApprovalRequest dto) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Infrastructure\Repositories\LeaveApprovalRequestRepository.cs:line 32
   at LeaveManagement.Application.Features.LeaveRequests.Commands.SubmitLeaveRequest.SubmitLeaveRequestCommandHandler.Handle(SubmitLeaveRequestCommand request, CancellationToken cancellationToken) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Application\Features\LeaveRequests\Commands\SubmitLeaveRequest\SubmitLeaveRequestCommandHandler.cs:line 104
   at LeaveManagement.WebUI.Controllers.LeaveRequestController.Submit(Int32 id) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI\Controllers\LeaveRequestController.cs:line 157
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:706a99f9-9514-4a3b-9240-5cc020fdc562
Error Number:547,State:0,Class:16
2025-07-08T16:52:55.6292554+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T16:52:55.6498075+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T16:52:55.6506200+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T16:52:55.6507221+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T16:53:07.4764266+07:00 0HNDU0KRBT0K5:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T16:53:07.4780626+07:00 0HNDU0KRBT0K5:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T16:59:20.5240326+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T16:59:20.5435204+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T16:59:20.5441734+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T16:59:20.5442303+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T17:00:14.3288777+07:00 0HNDU0OE0O6VC:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T17:00:14.3305953+07:00 0HNDU0OE0O6VC:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T17:34:43.6589094+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T17:34:43.6741758+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T17:34:43.6746391+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T17:34:43.6746919+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T17:34:55.2775035+07:00 0HNDU1C6OJCGB:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T17:34:55.2793313+07:00 0HNDU1C6OJCGB:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T17:42:21.9647004+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T17:42:21.9869378+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T17:42:21.9879561+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T17:42:21.9880559+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T17:42:46.5003013+07:00 0HNDU1GFC1NMF:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T17:42:46.5031129+07:00 0HNDU1GFC1NMF:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T17:43:00.2925851+07:00 0HNDU1GFC1NME:00000005 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
System.AggregateException: One or more errors occurred. (Incorrect syntax near ','.)
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Incorrect syntax near ','.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Dapper.SqlMapper.QueryAsync[T](IDbConnection cnn, Type effectiveType, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 434
   at LeaveManagement.Infrastructure.Repositories.UserRepository.FindApproverAsyncByMaChucVu(String maChucVu) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Infrastructure\Repositories\UserRepository.cs:line 75
ClientConnectionId:cf95a8a2-b83f-4e50-9634-9a8c12812a65
Error Number:102,State:1,Class:15
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at LeaveManagement.Application.Features.LeaveRequests.Commands.SubmitLeaveRequest.SubmitLeaveRequestCommandHandler.Handle(SubmitLeaveRequestCommand request, CancellationToken cancellationToken) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Application\Features\LeaveRequests\Commands\SubmitLeaveRequest\SubmitLeaveRequestCommandHandler.cs:line 89
   at LeaveManagement.WebUI.Controllers.LeaveRequestController.Submit(Int32 id) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI\Controllers\LeaveRequestController.cs:line 157
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-08T17:45:02.5038623+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T17:45:02.5229865+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T17:45:02.5237510+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T17:45:02.5238406+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T17:45:14.1055232+07:00 0HNDU1HV57J48:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T17:45:14.1078581+07:00 0HNDU1HV57J48:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T17:47:14.6337341+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T17:47:14.6619822+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T17:47:14.6628883+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T17:47:14.6629601+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T17:47:25.4879549+07:00 0HNDU1J6JBMO1:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T17:47:25.4895013+07:00 0HNDU1J6JBMO1:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T17:48:42.2520191+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T17:48:42.2698009+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T17:48:42.2704930+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T17:48:42.2705705+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T17:48:54.4377985+07:00 0HNDU1K0MLCTB:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T17:48:54.4398247+07:00 0HNDU1K0MLCTB:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T17:49:46.0712274+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T17:49:46.0910400+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T17:49:46.0914950+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T17:49:46.0915386+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T17:49:58.3898936+07:00 0HNDU1KJP1M1N:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T17:49:58.3913417+07:00 0HNDU1KJP1M1N:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T17:51:09.7558101+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T17:51:09.7696696+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T17:51:09.7702764+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T17:51:09.7703133+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T17:51:19.5597236+07:00 0HNDU1LCLC0U7:00000001 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T17:51:19.5621201+07:00 0HNDU1LCLC0U7:00000001 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T17:53:38.3788018+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T17:53:38.3954217+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T17:53:38.3963476+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T17:53:38.3964277+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T17:53:48.8826126+07:00 0HNDU1MOT1NKF:00000001 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T17:53:48.8841296+07:00 0HNDU1MOT1NKF:00000001 [INF] ReturnUrl = "/leaverequest" (a535d855)
2025-07-08T17:54:36.4161693+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T17:54:36.4350424+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T17:54:36.4356254+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T17:54:36.4357282+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T17:55:16.0164845+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-08T17:55:16.0458098+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-08T17:55:16.0466611+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-08T17:55:16.0467699+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-08T17:55:30.5912020+07:00 0HNDU1NM3K1CO:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/leaverequest" (21a11489)
2025-07-08T17:55:30.5928503+07:00 0HNDU1NM3K1CO:00000002 [INF] ReturnUrl = "/leaverequest" (a535d855)
