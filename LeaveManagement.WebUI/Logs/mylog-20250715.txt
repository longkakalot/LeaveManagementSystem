2025-07-15T14:57:25.5157104+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-15T14:57:25.5342422+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-15T14:57:25.5347146+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-15T14:57:25.5347745+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-15T15:01:38.8144936+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-15T15:01:38.8333358+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-15T15:01:38.8341868+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-15T15:01:38.8342660+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-15T15:01:50.6792536+07:00 0HNE3EN9S8ELU:00000001 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/" (21a11489)
2025-07-15T15:01:50.6818910+07:00 0HNE3EN9S8ELU:00000001 [INF] ReturnUrl = "/" (a535d855)
2025-07-15T15:02:04.2148574+07:00 0HNE3EN9S8EM0:00000002 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
Microsoft.Data.SqlClient.SqlException (0x80131904): Procedure or function 'sp_USERSLEAVEBALANCES' expects parameter '@DaysToDeduct', which was not supplied.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Dapper.SqlMapper.QueryRowAsync[T](IDbConnection cnn, Row row, Type effectiveType, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 489
   at LeaveManagement.Infrastructure.Repositories.UserLeaveBalanceRepository.GetUserLeaveBalance(Int32 userId, Int32 year) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Infrastructure\Repositories\UserLeaveBalanceRepository.cs:line 118
   at LeaveManagement.Application.Features.UserLeaveBalances.Queries.UserLeaveBalanceQueryHandler.Handle(UserLeaveBalanceQuery request, CancellationToken cancellationToken) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Application\Features\UserLeaveBalances\Queries\UserLeaveBalanceQueryHandler.cs:line 25
   at LeaveManagement.WebUI.Controllers.LeaveRequestController.Create() in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI\Controllers\LeaveRequestController.cs:line 49
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:6fe6344a-93e8-419d-8355-f2e717779ee1
Error Number:201,State:4,Class:16
2025-07-15T15:26:03.8769294+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-15T15:26:03.8906732+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-15T15:26:03.8912087+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-15T15:26:03.8912632+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-15T15:26:16.5415121+07:00 0HNE3F4UHN8O3:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/" (21a11489)
2025-07-15T15:26:16.5434378+07:00 0HNE3F4UHN8O3:00000002 [INF] ReturnUrl = "/" (a535d855)
2025-07-15T15:28:49.4519230+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-15T15:28:49.4648770+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-15T15:28:49.4655275+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-15T15:28:49.4656004+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-15T15:28:58.4375066+07:00 0HNE3F6FU5A6M:00000001 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/" (21a11489)
2025-07-15T15:28:58.4390721+07:00 0HNE3F6FU5A6M:00000001 [INF] ReturnUrl = "/" (a535d855)
2025-07-15T15:38:36.6334699+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-15T15:38:36.6475459+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-15T15:38:36.6481299+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-15T15:38:36.6481966+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-15T15:39:15.6013262+07:00 0HNE3FBUVLJQF:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/" (21a11489)
2025-07-15T15:39:15.6027525+07:00 0HNE3FBUVLJQF:00000002 [INF] ReturnUrl = "/" (a535d855)
2025-07-15T15:39:18.0915205+07:00 0HNE3FBUVLJQH:00000002 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
System.InvalidOperationException: The ConnectionString property has not been initialized.
   at Microsoft.Data.SqlClient.SqlConnection.PermissionDemand()
   at Microsoft.Data.SqlClient.SqlConnectionFactory.PermissionDemand(DbConnection outerConnection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(SqlConnectionOverrides overrides, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Dapper.SqlMapper.QueryRowAsync[T](IDbConnection cnn, Row row, Type effectiveType, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 488
   at LeaveManagement.Infrastructure.Repositories.UserLeaveBalanceRepository.GetUserLeaveBalance(Int32 userId, Int32 year) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Infrastructure\Repositories\UserLeaveBalanceRepository.cs:line 118
   at LeaveManagement.Application.Features.UserLeaveBalances.Queries.UserLeaveBalanceQueryHandler.Handle(UserLeaveBalanceQuery request, CancellationToken cancellationToken) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Application\Features\UserLeaveBalances\Queries\UserLeaveBalanceQueryHandler.cs:line 25
   at LeaveManagement.WebUI.Controllers.LeaveRequestController.Create() in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI\Controllers\LeaveRequestController.cs:line 82
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-15T15:39:57.4125114+07:00 0HNE3FBUVLJQF:00000006 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
System.InvalidOperationException: The ConnectionString property has not been initialized.
   at Microsoft.Data.SqlClient.SqlConnection.PermissionDemand()
   at Microsoft.Data.SqlClient.SqlConnectionFactory.PermissionDemand(DbConnection outerConnection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(SqlConnectionOverrides overrides, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Dapper.SqlMapper.QueryRowAsync[T](IDbConnection cnn, Row row, Type effectiveType, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 488
   at LeaveManagement.Infrastructure.Repositories.UserLeaveBalanceRepository.GetUserLeaveBalance(Int32 userId, Int32 year) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Infrastructure\Repositories\UserLeaveBalanceRepository.cs:line 118
   at LeaveManagement.Application.Features.UserLeaveBalances.Queries.UserLeaveBalanceQueryHandler.Handle(UserLeaveBalanceQuery request, CancellationToken cancellationToken) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Application\Features\UserLeaveBalances\Queries\UserLeaveBalanceQueryHandler.cs:line 25
   at LeaveManagement.WebUI.Controllers.LeaveRequestController.Create() in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI\Controllers\LeaveRequestController.cs:line 82
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-15T15:42:48.0534521+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-15T15:42:48.0678814+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-15T15:42:48.0683858+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-15T15:42:48.0684483+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-15T15:42:57.8929755+07:00 0HNE3FE9SFK2Q:00000001 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/" (21a11489)
2025-07-15T15:42:57.8944258+07:00 0HNE3FE9SFK2Q:00000001 [INF] ReturnUrl = "/" (a535d855)
2025-07-15T15:43:00.3378759+07:00 0HNE3FE9SFK2S:00000002 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
System.InvalidOperationException: The ConnectionString property has not been initialized.
   at Microsoft.Data.SqlClient.SqlConnection.PermissionDemand()
   at Microsoft.Data.SqlClient.SqlConnectionFactory.PermissionDemand(DbConnection outerConnection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(SqlConnectionOverrides overrides, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Dapper.SqlMapper.QueryRowAsync[T](IDbConnection cnn, Row row, Type effectiveType, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 488
   at LeaveManagement.Infrastructure.Repositories.UserLeaveBalanceRepository.GetUserLeaveBalance(Int32 userId, Int32 year) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Infrastructure\Repositories\UserLeaveBalanceRepository.cs:line 118
   at LeaveManagement.Application.Features.UserLeaveBalances.Queries.UserLeaveBalanceQueryHandler.Handle(UserLeaveBalanceQuery request, CancellationToken cancellationToken) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Application\Features\UserLeaveBalances\Queries\UserLeaveBalanceQueryHandler.cs:line 25
   at LeaveManagement.WebUI.Controllers.LeaveRequestController.Create() in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI\Controllers\LeaveRequestController.cs:line 82
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-15T16:27:31.1491696+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-15T16:27:31.1614605+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-15T16:27:31.1620362+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-15T16:27:31.1621018+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-15T16:28:28.9445865+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-15T16:28:28.9588147+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-15T16:28:28.9593727+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-15T16:28:28.9594448+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-15T16:33:49.6252931+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-15T16:33:49.6461204+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-15T16:33:49.6471353+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-15T16:33:49.6472625+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-15T16:33:58.2545728+07:00 0HNE3GAQ8NL06:00000001 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/" (21a11489)
2025-07-15T16:33:58.2561901+07:00 0HNE3GAQ8NL06:00000001 [INF] ReturnUrl = "/" (a535d855)
2025-07-15T16:34:01.3311912+07:00 0HNE3GAQ8NL08:00000002 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
System.InvalidOperationException: The ConnectionString property has not been initialized.
   at Microsoft.Data.SqlClient.SqlConnection.PermissionDemand()
   at Microsoft.Data.SqlClient.SqlConnectionFactory.PermissionDemand(DbConnection outerConnection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(SqlConnectionOverrides overrides, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Dapper.SqlMapper.QueryRowAsync[T](IDbConnection cnn, Row row, Type effectiveType, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 488
   at LeaveManagement.Infrastructure.Repositories.UserLeaveBalanceRepository.GetUserLeaveBalance(Int32 userId, Int32 year) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Infrastructure\Repositories\UserLeaveBalanceRepository.cs:line 263
   at LeaveManagement.Application.Features.UserLeaveBalances.Queries.UserLeaveBalanceQueryHandler.Handle(UserLeaveBalanceQuery request, CancellationToken cancellationToken) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Application\Features\UserLeaveBalances\Queries\UserLeaveBalanceQueryHandler.cs:line 25
   at LeaveManagement.WebUI.Controllers.LeaveRequestController.Create() in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI\Controllers\LeaveRequestController.cs:line 82
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-15T16:38:38.7446929+07:00 0HNE3GAQ8NL06:00000005 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
System.InvalidOperationException: The ConnectionString property has not been initialized.
   at Microsoft.Data.SqlClient.SqlConnection.PermissionDemand()
   at Microsoft.Data.SqlClient.SqlConnectionFactory.PermissionDemand(DbConnection outerConnection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(SqlConnectionOverrides overrides, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Dapper.SqlMapper.QueryRowAsync[T](IDbConnection cnn, Row row, Type effectiveType, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 488
   at LeaveManagement.Infrastructure.Repositories.UserLeaveBalanceRepository.GetUserLeaveBalance(Int32 userId, Int32 year) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Infrastructure\Repositories\UserLeaveBalanceRepository.cs:line 263
   at LeaveManagement.Application.Features.UserLeaveBalances.Queries.UserLeaveBalanceQueryHandler.Handle(UserLeaveBalanceQuery request, CancellationToken cancellationToken) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Application\Features\UserLeaveBalances\Queries\UserLeaveBalanceQueryHandler.cs:line 25
   at LeaveManagement.WebUI.Controllers.LeaveRequestController.Create() in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI\Controllers\LeaveRequestController.cs:line 82
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-15T16:40:06.9163333+07:00 0HNE3GAQ8NL08:00000005 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
System.InvalidOperationException: The ConnectionString property has not been initialized.
   at Microsoft.Data.SqlClient.SqlConnection.PermissionDemand()
   at Microsoft.Data.SqlClient.SqlConnectionFactory.PermissionDemand(DbConnection outerConnection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(SqlConnectionOverrides overrides, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Dapper.SqlMapper.QueryRowAsync[T](IDbConnection cnn, Row row, Type effectiveType, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 488
   at LeaveManagement.Infrastructure.Repositories.UserLeaveBalanceRepository.GetUserLeaveBalance(Int32 userId, Int32 year) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Infrastructure\Repositories\UserLeaveBalanceRepository.cs:line 263
   at LeaveManagement.Application.Features.UserLeaveBalances.Queries.UserLeaveBalanceQueryHandler.Handle(UserLeaveBalanceQuery request, CancellationToken cancellationToken) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Application\Features\UserLeaveBalances\Queries\UserLeaveBalanceQueryHandler.cs:line 25
   at LeaveManagement.WebUI.Controllers.LeaveRequestController.Create() in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI\Controllers\LeaveRequestController.cs:line 82
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-15T16:42:22.6774035+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-15T16:42:22.6916988+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-15T16:42:22.6923631+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-15T16:42:22.6924661+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-15T16:42:34.8931485+07:00 0HNE3GFJ7R7HM:00000001 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/" (21a11489)
2025-07-15T16:42:34.8950559+07:00 0HNE3GFJ7R7HM:00000001 [INF] ReturnUrl = "/" (a535d855)
2025-07-15T16:42:46.0395851+07:00 0HNE3GFJ7R7HO:00000002 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
System.InvalidOperationException: BeginExecuteReader requires the command to have a transaction when the connection assigned to the command is in a pending local transaction.  The Transaction property of the command has not been initialized.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Dapper.SqlMapper.QueryRowAsync[T](IDbConnection cnn, Row row, Type effectiveType, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 489
   at LeaveManagement.Infrastructure.Repositories.UserLeaveBalanceRepository.GetUserLeaveBalance(Int32 userId, Int32 year) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Infrastructure\Repositories\UserLeaveBalanceRepository.cs:line 263
   at LeaveManagement.Application.Features.UserLeaveBalances.Queries.UserLeaveBalanceQueryHandler.Handle(UserLeaveBalanceQuery request, CancellationToken cancellationToken) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Application\Features\UserLeaveBalances\Queries\UserLeaveBalanceQueryHandler.cs:line 25
   at LeaveManagement.WebUI.Controllers.LeaveRequestController.Create() in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI\Controllers\LeaveRequestController.cs:line 77
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-15T16:43:42.7391255+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-15T16:43:42.7518619+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-15T16:43:42.7523221+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-15T16:43:42.7523576+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-15T16:43:52.0559314+07:00 0HNE3GGB05BDQ:00000001 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/" (21a11489)
2025-07-15T16:43:52.0573300+07:00 0HNE3GGB05BDQ:00000001 [INF] ReturnUrl = "/" (a535d855)
2025-07-15T16:44:00.1363521+07:00 0HNE3GGB05BDS:00000002 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
System.InvalidOperationException: BeginExecuteReader requires the command to have a transaction when the connection assigned to the command is in a pending local transaction.  The Transaction property of the command has not been initialized.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Dapper.SqlMapper.QueryRowAsync[T](IDbConnection cnn, Row row, Type effectiveType, CommandDefinition command) in /_/Dapper/SqlMapper.Async.cs:line 489
   at LeaveManagement.Infrastructure.Repositories.UserLeaveBalanceRepository.GetUserLeaveBalance(Int32 userId, Int32 year) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Infrastructure\Repositories\UserLeaveBalanceRepository.cs:line 263
   at LeaveManagement.Application.Features.UserLeaveBalances.Queries.UserLeaveBalanceQueryHandler.Handle(UserLeaveBalanceQuery request, CancellationToken cancellationToken) in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.Application\Features\UserLeaveBalances\Queries\UserLeaveBalanceQueryHandler.cs:line 25
   at LeaveManagement.WebUI.Controllers.LeaveRequestController.Create() in E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI\Controllers\LeaveRequestController.cs:line 77
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-15T16:45:16.7515739+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-15T16:45:16.7648463+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-15T16:45:16.7653030+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-15T16:45:16.7653390+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-15T16:45:26.3532909+07:00 0HNE3GH70P8LO:00000001 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/" (21a11489)
2025-07-15T16:45:26.3548176+07:00 0HNE3GH70P8LO:00000001 [INF] ReturnUrl = "/" (a535d855)
2025-07-15T16:58:18.2660698+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-15T16:58:18.2802831+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-15T16:58:18.2808731+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-15T16:58:18.2809276+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-15T16:58:45.2774523+07:00 0HNE3GOFVE20S:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/" (21a11489)
2025-07-15T16:58:45.2799798+07:00 0HNE3GOFVE20S:00000002 [INF] ReturnUrl = "/" (a535d855)
2025-07-15T17:11:26.5361056+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-15T17:11:26.5486913+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-15T17:11:26.5491545+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-15T17:11:26.5491867+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-15T17:12:18.5429655+07:00 0HNE3GVQU5MJG:00000003 [WRN] Đăng nhập thất bại với user: "l" (aba56673)
2025-07-15T17:12:18.5429640+07:00 0HNE3GVQU5MJH:00000002 [WRN] Đăng nhập thất bại với user: "l" (aba56673)
2025-07-15T17:12:37.6011119+07:00 0HNE3GVQU5MJG:00000006 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/" (21a11489)
2025-07-15T17:12:37.6012417+07:00 0HNE3GVQU5MJG:00000006 [INF] ReturnUrl = "/" (a535d855)
2025-07-15T17:30:35.3501134+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-15T17:30:35.3643559+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-15T17:30:35.3648627+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-15T17:30:35.3649350+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-15T17:31:03.4908899+07:00 0HNE3HAHA9QEH:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/" (21a11489)
2025-07-15T17:31:03.4925413+07:00 0HNE3HAHA9QEH:00000002 [INF] ReturnUrl = "/" (a535d855)
2025-07-15T17:34:32.4979170+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-15T17:34:32.5167320+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-15T17:34:32.5174269+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-15T17:34:32.5177049+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-15T17:40:59.5967139+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-15T17:40:59.6093623+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-15T17:40:59.6097846+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-15T17:40:59.6098233+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-15T17:41:14.7887770+07:00 0HNE3HGBBN6SJ:00000002 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/LeaveRequest/Create" (21a11489)
2025-07-15T17:41:14.7904107+07:00 0HNE3HGBBN6SJ:00000002 [INF] ReturnUrl = "/LeaveRequest/Create" (a535d855)
2025-07-15T17:41:52.7800000+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-15T17:41:52.8004403+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-15T17:41:52.8011149+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-15T17:41:52.8012199+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-15T17:42:02.2773950+07:00 0HNE3HGR3A1F1:00000001 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/LeaveRequest/Create" (21a11489)
2025-07-15T17:42:02.2789628+07:00 0HNE3HGR3A1F1:00000001 [INF] ReturnUrl = "/LeaveRequest/Create" (a535d855)
2025-07-15T17:43:21.9989390+07:00  [INF] Now listening on: "http://localhost:5274" (d826f4b8)
2025-07-15T17:43:22.0147247+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2025-07-15T17:43:22.0151565+07:00  [INF] Hosting environment: "Development" (bc5a1a4e)
2025-07-15T17:43:22.0152030+07:00  [INF] Content root path: "E:\SourceCodeWebApp\2025\LeaveManagement\LeaveManagementSystem\LeaveManagement.WebUI" (cc26f24e)
2025-07-15T17:43:35.3149947+07:00 0HNE3HHLP4VI1:00000001 [INF] Đăng nhập thành công với user: "longnc", ReturnUrl = "/" (21a11489)
2025-07-15T17:43:35.3170943+07:00 0HNE3HHLP4VI1:00000001 [INF] ReturnUrl = "/" (a535d855)
